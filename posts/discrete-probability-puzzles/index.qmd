---
title: "Discrete probability puzzles"
author: "Quasar"
date: "2025-10-22"
categories: [Quant Puzzles]      
tags: [ discrete-probability ]
image: "image.jpg"
toc: true
toc-depth: 3
---

## Puzzles on discrete probability

::: {#exm-puzzle-1}

We flip a fair coin until we obtain our first heads. If the first heads occurs on the $k$-th flip, we are given $k$ balls. We put them into 3 bins labeled 1, 2, and 3 at random. Find the probability that none of the three bins are empty.

:::

*Solution*.

Let $A_k$ be the event that the first head occurs on the $k$th flip. So, we are interested in the sequence $\underbrace{T \ldots T}_{(k-1)\text{-tails}}H$. We have:

$$
\mathbb{P}(A_k) = \left(\frac{1}{2}\right)^{k-1} \cdot \frac{1}{2} = \frac{1}{2^k}
$$

In assigning $k$ balls to the bins, we first place one ball in each of the three bins. Remember, the balls are indistinguishable. That leaves us with $(k-3)$ balls. $(k-3)$ indistinguishable balls can be assigned to $n=3$ boxes in ${k-1 \choose 2}$ distinguishable ways. Let $B_k$ be the event that none of the bins are empty, given $k$ balls

$$
\mathbb{P}(B_k | A_k ) = \frac{{k-1 \choose 2}}{3^k}
$$

distinguishable ways. Hence, the probability that none of the three bins are empty is:

$$
\begin{align*}
\mathbb{P}(\text{No empty bins}) &= \mathbb{P}(B_3 | A_3 )\mathbb{P}(A_3) + \mathbb{P}(B_4 | A_4) \mathbb{P}(A_4) + \ldots \\
&= \sum_{k=3}^{\infty}\frac{1}{2^k} \frac{{k-1 \choose 2}}{3^k}\\
&= \sum_{k=3}^{\infty} \frac{(k-1)k}{2}\frac{1}{6^k}\\
\end{align*}
$$

A closed form expression for the above arithmetico-geometric series can quickly be derived. We have:

$$
\begin{align*}
\frac{1}{1 - x} &= 1 + x + x^2 + x^3 + x^4 + \ldots\\
\frac{1}{(1-x)^2} &= 1 + 2x + 3x^2 + 4x^3 + \ldots \quad \{\text{Differentiating both sides}\}\\
\frac{2}{(1-x)^3} &= 2 + 3\cdot 2 x + 4 \cdot 3 x^2 + \ldots \quad \{\text{Differentiating both sides}\}\\
\frac{2x^2}{(1-x)^3} &= 2x^2 + 3\cdot 2 x^3 + 4 \cdot 3 x^4 + \ldots \quad \{\text{Multiplying by }x^2\}\\
\frac{2x^2(1 - (1-x)^3) }{(1-x)^3} &= 3\cdot 2 x^3 + 4 \cdot 3 x^4 + \ldots\\
\frac{x^2(1 - (1-x)^3) }{(1-x)^3} &= \frac{1}{2}\left(3\cdot 2 x^3 + 4 \cdot 3 x^4 + \ldots\right)\\
\frac{\frac{1}{6^2}\left(1-\frac{5^3}{6^3}\right)}{\frac{5^3}{6^3}} &= \frac{1}{2}\left(3\cdot 2 \frac{1}{6^3} + 4 \cdot 3 \frac{1}{6^4} + \ldots\right)\\
\end{align*}
$$

The desired probability is:

$$
p=\frac{\frac{1}{6^2}\left(1-\frac{5^3}{6^3}\right)}{\frac{5^3}{6^3}} = \frac{1}{6^2}\left(\frac{6^3}{5^3} - 1\right)=
$$