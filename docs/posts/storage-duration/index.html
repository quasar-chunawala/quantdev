<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Quasar">
<meta name="dcterms.date" content="2025-12-22">

<title>quantdev.blog - Storage Duration and Linkage in C++</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;800&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap')
</style>
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9993009899870547" crossorigin="anonymous"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../.././symbol.svg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">quantdev.blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../newsletter.html" rel="" target="">
 <span class="menu-text">Newsletter</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../sell_side_quant_critical_path.html" rel="" target="">
 <span class="menu-text">Sell-side Quant</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../roadmap.html" rel="" target="">
 <span class="menu-text">C++ Roadmap</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://patreon.com/u59411143?utm_medium=unknown&amp;utm_source=join_link&amp;utm_campaign=creatorshare_creator&amp;utm_content=copyLink" rel="" target=""><i class="bi bi-patreon" role="img">
</i> 
 <span class="menu-text">Become a patreon</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/quasar-chunawala" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="http://linkedin.com/in/quasar-chunawala" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml" rel="" target=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Storage Duration and Linkage in C++</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">C++</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Quasar </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 22, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#names-and-attributes" id="toc-names-and-attributes" class="nav-link active" data-scroll-target="#names-and-attributes">Names and Attributes</a></li>
  <li><a href="#source-files-and-header-files" id="toc-source-files-and-header-files" class="nav-link" data-scroll-target="#source-files-and-header-files">Source files and header files</a></li>
  <li><a href="#storage-duration" id="toc-storage-duration" class="nav-link" data-scroll-target="#storage-duration">Storage Duration</a></li>
  <li><a href="#linkage" id="toc-linkage" class="nav-link" data-scroll-target="#linkage">Linkage</a>
  <ul class="collapse">
  <li><a href="#external-linkage" id="toc-external-linkage" class="nav-link" data-scroll-target="#external-linkage">External linkage</a></li>
  <li><a href="#internal-linkage" id="toc-internal-linkage" class="nav-link" data-scroll-target="#internal-linkage">Internal linkage</a></li>
  <li><a href="#no-linkage" id="toc-no-linkage" class="nav-link" data-scroll-target="#no-linkage">No linkage</a></li>
  </ul></li>
  <li><a href="#a-conceptual-model" id="toc-a-conceptual-model" class="nav-link" data-scroll-target="#a-conceptual-model">A conceptual model</a></li>
  <li><a href="#storage-class-specifiers-and-functions" id="toc-storage-class-specifiers-and-functions" class="nav-link" data-scroll-target="#storage-class-specifiers-and-functions">Storage class specifiers and functions</a></li>
  <li><a href="#storage-class-specifiers-and-objects" id="toc-storage-class-specifiers-and-objects" class="nav-link" data-scroll-target="#storage-class-specifiers-and-objects">Storage class specifiers and objects</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="names-and-attributes" class="level1">
<h1>Names and Attributes</h1>
<p>In C++, a declared name can have associated attributes:</p>
<ul>
<li>Type</li>
<li>Scope</li>
<li>Storage duration</li>
<li>Linkage</li>
</ul>
</section>
<section id="source-files-and-header-files" class="level1">
<h1>Source files and header files</h1>
<p>Each C++ application or library consists of one or more source files. The C++ compiler translates <code>.cpp</code> source files to object files <code>*.o</code>, one source file at a time.</p>
<p><img src="compilation_model.png" style="width:80.0%;height:80.0%"></p>
<p>The translation unit(TU) is the basic unit of compilation in C++. It is a single implementation file (<code>*.cpp</code>) together with the contents of all it’s header files.</p>
</section>
<section id="storage-duration" class="level1">
<h1>Storage Duration</h1>
<p>The storage duration of an object defines the lifetime of the storage containing the object.</p>
<p>In C++, the storage duration of the object can be:</p>
<ul>
<li>Static</li>
<li>Thread</li>
<li>Automatic</li>
<li>Dynamic</li>
</ul>
<p>For an object with <em>static</em> storage duration: - The storage is allocated at program startup. - The storage persists until the program is terminated.</p>
<p>For an object with <em>thread</em> storage duration: - The storage is allocated when the thread begins. - THe storage persists until the thread terminates.</p>
<p>For an object with automatic storage duration: - The storage is allocated when the enclosing block begins executing. This is usually upon entering the enclosing function. - The storage persists until the block terminates. This is usally upon function return.</p>
<p>For an object with dynamic storage duration: - The storage is allocated on the heap by a call to a memory allocation function e.g.&nbsp;<code>std::malloc</code>, <code>operator new</code> or the new expression. - The storage on the heap is deallocated by <code>std::free</code>, <code>operator delete</code> or the delete expression.</p>
</section>
<section id="linkage" class="level1">
<h1>Linkage</h1>
<p>The <em>linkage</em> of a name is the extent to which that name might refer to a name declared elsewhere. C++ provides for three categories of linkage:</p>
<ul>
<li>external linkage</li>
<li>internal linkage</li>
<li>no linkage</li>
</ul>
<section id="external-linkage" class="level2">
<h2 class="anchored" data-anchor-id="external-linkage">External linkage</h2>
<p>A given name declared with external linkage denotes the same entity across all translation units in a program.</p>
<p>In the below example, <code>total</code> in each translation unit has external linkage:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">//file1.cpp</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="at">extern</span> <span class="dt">int</span> total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>   <span class="co">// definition</span></span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">//file2.cpp</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="at">extern</span> <span class="dt">int</span> total<span class="op">;</span>       <span class="co">// declaration for the same object</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>total</code> is defined in <code>file1.cpp</code>. It has <code>extern</code> on it, which means external linkage. It is a definition, it does have an initial value <code>0</code>. In the second implementation file <code>file2.cpp</code>, it does not have an initializer, so its just a declaration. Those two things refer to the same variable. After separate compiling both <code>file1.cpp</code> and <code>file2.cpp</code> into <code>file1.o</code> and <code>file2.o</code> and linking them together, there’s going to be only one <code>total</code> in this executable.</p>
</section>
<section id="internal-linkage" class="level2">
<h2 class="anchored" data-anchor-id="internal-linkage">Internal linkage</h2>
<p>A given name declared with internal linkage denotes the same entity <strong><em>within a single translation unit</em></strong>.</p>
<p>A variable with internal linkage can be declared multiple times within a single translation unit and they all wind up referring to the same thing. But, nobody outside the translation unit can refer to those things with internal linkage.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">// file1.cpp</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="at">static</span> <span class="dt">int</span> total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>   <span class="co">// definition of total </span></span>
<span id="cb2-3"><a href="#cb2-3"></a>                        <span class="co">// with internal linkage</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>    </span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">// file2.cpp</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="at">extern</span> <span class="dt">int</span> total<span class="op">;</span>       <span class="co">// declaration for </span></span>
<span id="cb2-7"><a href="#cb2-7"></a>                        <span class="co">// a different object</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In <code>file2.cpp</code> you have a declaration of <code>total</code> with external linkage and that says, *“Hey, I don’t have any storage, I need it from somewhere else!”. But, it can’t get it from <code>file1.cpp</code>. <code>file1.cpp</code> does not have external linkage. If you try to build this program, because that’s an unsatisfied reference <code>file2.cpp</code>, you’d probably get a link error. At link time, it would say, I don’t see a definition for <code>total</code> to satisfy.</p>
<p>So, what we need is a third one - <code>file3.cpp</code>. The previous example needs the <code>total</code> in <code>file3.cpp</code> to link:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1"></a><span class="co">// file1.cpp</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="at">static</span> <span class="dt">int</span> total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>   <span class="co">// a definition for total</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>                        <span class="co">// with internal linkage</span></span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">// file2.cpp</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="at">extern</span> <span class="dt">int</span> total<span class="op">;</span>       <span class="co">// a declaration that refers to </span></span>
<span id="cb3-7"><a href="#cb3-7"></a>                        <span class="co">// the total in file3.cpp</span></span>
<span id="cb3-8"><a href="#cb3-8"></a></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">// file3.cpp</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="dt">int</span> total<span class="op">;</span>              <span class="co">// a definition for the object</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>                        <span class="co">// referenced in file2.cpp</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>total</code> in <code>file2.cpp</code> refers to the object in <code>file3.cpp</code>. To summarize, there are two <code>total</code> objects in all - one internal to <code>file1.cpp</code> and one that’s shared by <code>file2</code> and <code>file3</code> via external linkage.</p>
</section>
<section id="no-linkage" class="level2">
<h2 class="anchored" data-anchor-id="no-linkage">No linkage</h2>
<p>Local variables have no linkage. Suppose you have two functions <code>f()</code> and <code>g()</code>. Each have a local variable named <code>total</code>. Think about it. Is there any way, you can write a declaration for <code>total</code> anywhere else in the program that will at link time become a reference to one of those <code>total</code>s?</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1"></a><span class="dt">int</span> f<span class="op">(</span><span class="dt">int</span> i<span class="op">){</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>    <span class="dt">int</span> total<span class="op">;</span>  <span class="co">// a definition</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="op">}</span></span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="dt">int</span> g<span class="op">(</span><span class="dt">int</span> i<span class="op">){</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>    <span class="dt">int</span> total<span class="op">;</span>  <span class="co">// a definition for a different object</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>No, you can’t do that. Those <code>total</code>s have automatic storage. They are not statically allocated. Because they don’t have a fixed location, there’s no way the linker can can link them. The only things that can have linkage, are things that have a fixed location - functions and objects with static storage.</p>
</section>
</section>
<section id="a-conceptual-model" class="level1">
<h1>A conceptual model</h1>
<p>In a release build, the <strong><em>linker sees names only if they have external linkage.</em></strong> Names that have internal linkage or no linkage are useful for symbolic debugging, but the linker does not use them when it is combining <code>*.o</code> object files together to produce an executable.</p>
<ul>
<li><p>Names <strong><em>defined</em></strong> with external linkage in a translation unit become definitions in the compiled object module.</p></li>
<li><p>Names <strong><em>declared</em></strong> with external linkage but not defined in a translation unit become <strong><em>refs</em></strong> in the compiled object module. But, only if they are used in that translation unit.</p></li>
</ul>
<p>In a release build, the <strong><em>compiler discards names declared with internal or no linkage</em></strong> at the end of compilation.</p>
</section>
<section id="storage-class-specifiers-and-functions" class="level1">
<h1>Storage class specifiers and functions</h1>
<p>By default functions at namespace scope have external linkage.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1"></a><span class="dt">int</span> f<span class="op">(</span><span class="dt">int</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Adding the keyword <code>extern</code> to a function declaration at file or namespace(global) scope has no effect:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">namespace</span> demo<span class="op">{</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>    <span class="at">extern</span> <span class="dt">int</span> f<span class="op">(</span><span class="dt">int</span><span class="op">);</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Class members in C++ have external linkage by default.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">class</span> Widget<span class="op">{</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>    <span class="kw">public</span><span class="op">:</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>    <span class="dt">int</span> f<span class="op">(</span><span class="dt">int</span><span class="op">);</span>     <span class="co">// f has external linkage</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You commonly place class definitions in header files. And you include those all over the place and create objects that type and call member functions on them and at nowhere did you say that these things were extern. You just implicitly treat them as if they are. They have <code>extern</code> linkage by default.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">class</span> Widget<span class="op">{</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>    <span class="kw">public</span><span class="op">:</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>    <span class="dt">int</span> f<span class="op">(</span><span class="dt">int</span><span class="op">);</span>     <span class="co">// f has external linkage</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>    <span class="co">// extern int g(int);   // error: can't use extern here</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="op">};</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Adding an <code>extern</code> to a declaration at class scope is an error. Class member functions can never have anything but external linkage by default.</p>
<p>Declaring a free-standing function <strong><em><code>static</code> at file or namespace scope affects its linkage.</em></strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb9-1"><a href="#cb9-1"></a><span class="at">static</span> <span class="dt">int</span> f<span class="op">(</span><span class="dt">int</span><span class="op">);</span>      <span class="co">// f has internal linkage</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is not so for C++ class member functions.</p>
<p>Declaring a C++ class member function <code>static</code> <strong><em>does not</em></strong> affect its linkage.</p>
<p>It eliminates the function’s implicitly declared <strong><em><code>this</code> parameter.</em></strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">class</span> Widget<span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>    <span class="kw">public</span><span class="op">:</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>    <span class="at">static</span> <span class="dt">int</span> f<span class="op">(</span><span class="dt">int</span><span class="op">);</span>      <span class="co">// f has external linkage</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>                            <span class="co">// but has no `this`</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="op">};</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="storage-class-specifiers-and-objects" class="level1">
<h1>Storage class specifiers and objects</h1>
<p>Objects at file or namespace scope always have static storage:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb11-1"><a href="#cb11-1"></a>                    <span class="co">// linkage=     storage=</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="at">static</span> <span class="dt">int</span> j<span class="op">;</span>       <span class="co">// internal     static</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="at">extern</span> <span class="dt">int</span> j<span class="op">;</span>       <span class="co">// external     static</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="dt">int</span> k<span class="op">;</span>              <span class="co">// external     static</span></span>
<span id="cb11-5"><a href="#cb11-5"></a></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="kw">namespace</span> demo<span class="op">{</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>    <span class="at">static</span> <span class="dt">int</span> j<span class="op">;</span>   <span class="co">// internal     static</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>    <span class="at">extern</span> <span class="dt">int</span> j<span class="op">;</span>   <span class="co">// external     static</span></span>
<span id="cb11-9"><a href="#cb11-9"></a>    <span class="dt">int</span> k<span class="op">;</span>          <span class="co">// external     static</span></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="op">};</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this case, the storage-class specifier only affects the linkage.</p>
<p>Objects at local scope can have almost any storage duration or linkage:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb12-1"><a href="#cb12-1"></a><span class="dt">int</span> main<span class="op">()</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="op">{</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>                    <span class="co">// linkage=     storage=</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>    <span class="at">extern</span> <span class="dt">int</span> i<span class="op">;</span>   <span class="co">// ?            static</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>    <span class="at">static</span> <span class="dt">int</span> j<span class="op">;</span>   <span class="co">// No           static</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>    <span class="dt">int</span> m<span class="op">;</span>          <span class="co">// No           automatic</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For a name declared as <code>extern</code> at the file, namespace or local scope:</p>
<ul>
<li>The name has <strong><em>internal linkage if previously declared with internal linkage in a visible declaration</em></strong>.</li>
<li>Otherwise, it has external linkage.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource cpp number-lines code-with-copy"><code class="sourceCode cpp"><span id="cb13-1"><a href="#cb13-1"></a><span class="at">static</span> <span class="dt">int</span> foo<span class="op">(</span><span class="dt">int</span><span class="op">);</span>    <span class="co">// internal linkage</span></span>
<span id="cb13-2"><a href="#cb13-2"></a></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="dt">int</span> main<span class="op">(){</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>    <span class="at">extern</span> <span class="dt">int</span> foo<span class="op">(</span><span class="dt">int</span><span class="op">);</span>        <span class="co">// internal linkage</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>    <span class="at">extern</span> <span class="dt">int</span> bar<span class="op">(</span><span class="dt">int</span><span class="op">);</span>        <span class="co">// external linkage</span></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="references" class="level1">
<h1>References</h1>
<ul>
<li><em><a href="https://www.youtube.com/watch?v=cpkDQaYttR4">Back to Basics: Compiling and Linking</a> by Ben Saks, CppCon 2021</em></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="quasar-chunawala/quantdev" data-repo-id="R_kgDOL2t5-A" data-category="General" data-category-id="DIC_kwDOL2t5-M4ClndQ" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>